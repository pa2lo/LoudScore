:root {
	--border: light-dark(hsl(201, 4%, 93%), hsl(201, 4%, 20%));
	--card: light-dark(#f8f8f8, #111);

	--accent: light-dark(#000, #fff);
	--accentDark: light-dark(#444, #ccc);
	--accentContrast: light-dark(#fff, #000);
	--accentMix: light-dark(#fff, #282828);
	--accentLight: color-mix(in srgb, var(--accent) 10%, var(--accentMix));

	--color: light-dark(#222, #ddd);
	--colorBright: light-dark(#000, #fff);

	--c-green: light-dark(#008430, #16c757);
	--c-red: light-dark(#d32020, #ff3a3a);
	--c-blue: light-dark(#266cdc, #357ff5);
}

.logo-svg {
	display: none;
}
@media (prefers-color-scheme: dark) {
	.h-dark {
		display: none;
	}
	.h-light {
		display: block;
	}
}
@media (prefers-color-scheme: light) {
	.h-light {
		display: none;
	}
	.h-dark {
		display: block;
	}
}

html {
	color-scheme: light dark;
}
.theme-light {
	color-scheme: light;
}
.theme-dark {
	color-scheme: dark;
}

.theme-dark .h-dark, .theme-light .h-light {
	display: none;
}
.theme-dark .h-light, .theme-light .h-dark {
	display: block;
}

body {
	background: var(--card);
	padding: 1.5rem;
	margin: 0;
	font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
	line-height: 1.5;
	accent-color: var(--accent);
	color: var(--color);
	box-sizing: border-box;
	min-height: 100dvh;
}
* {
	box-sizing: inherit;
}

.invisible {
	display: none;
}

h1 {
	margin: 0 0 1.5rem;
	font-size: 2rem;
	line-height: 2.5rem;
	font-weight: 900;
	color: var(--accentDark);
}
p {
	margin: 0;
}
p:where(:not(:first-child)) {
	margin-top: 0.625rem;
}
.line {
	margin-top: 1rem;
}

.ta-c { text-align: center; }
.mt05 { margin-top: 0.5rem; }
.mt025 { margin-top: 0.25rem; }
.mt0125 { margin-top: 0.125rem; }
.light { color: color-mix(in srgb, var(--color) 60%, var(--card)); --bgHl: var(--color); }
.bigger { font-size: 1rem; }
.small { font-size: 0.75rem; }
.bold {	font-weight: 700; }
.flex { display: flex; }
.ai-c { align-items: center; }
.ml-a, button.ml-a { margin-left: auto; }

.color-heading { color: var(--colorBright); --bgHl: color-mix(in srgb, var(--colorBright), var(--card)); }
.color-green { color: var(--c-green); }
.color-red { color: var(--c-red); }
.color-blue { color: var(--c-blue); }
.fw600 { font-weight: 600; }

#app {
	font-size: 0.875rem;
	max-width: 80rem;
	margin: 0 auto;
}

.waveformStretch {
	--wfWidth: 100%;
}

.header {
	margin-bottom: 1rem;
	gap: 1rem;
	flex-wrap: wrap;
}
.logo {
	font-size: 1.5rem;
	line-height: 1.5rem;
	display: inline-flex;
	align-items: center;
	color: var(--colorBright);
	text-decoration: none;
	font-weight: 600;
	vertical-align: top;
	margin-right: auto;
}
.logo-svg {
	width: 2rem;
	height: 2rem;
	margin: 0 .5rem 0 0;
}

.tabler-icon {
	vertical-align: -.125em;
	display: inline-block;
	width: 1em;
	height: 1em;
}

.clickable {
	cursor: pointer;
}

/* inputs */
.files-label {
	border: 2px dashed var(--border);
	border-radius: .75rem;
	margin-top: 1.5rem;
	padding: 1.5rem;
	display: block;
	cursor: pointer;
	transition: border-color .1s;
	background: color-mix(in srgb, var(--card), var(--accentContrast));
	line-height: 1.25;
}
.files-label:hover {
	background: var(--accentContrast);
	border-color: color-mix(in srgb, var(--border) 80%, var(--accent));
}

.files-label-ico {
	margin-top: -0.25rem;
	font-size: 4rem;
	color: color-mix(in srgb, var(--accent) 65%, var(--accentMix));
	transition: color .1s;
}
.files-label:hover .files-label-ico {
	color: var(--accent);
}

.levelmodels, .setting-options {
	border-radius: .75rem;
	width: fit-content;
	display: inline-flex;
	padding: .25rem;
	font-weight: 600;
	background: var(--accentLight);
}
.levelmodel, .setting-label, .levelmodel-button {
	position: relative;
	padding: .25rem .75rem;
	display: flex;
	align-items: center;
	gap: .25rem;
	cursor: pointer;
	color: var(--accentDark);
	/* color: var(--accent); */
	border-radius: .5rem;
	height: 2rem;
	transition: background-color .1s, color .1s;
}
.levelmodel-ico, .button-ico {
	font-size: 1.5rem;
}
.levelmodel:hover, .setting-label:hover, .levelmodel-button:hover {
	color: var(--accent);
	/* color: var(--accentDark); */
	background: color-mix(in srgb, var(--accentLight) 65%, var(--accentContrast));
}
.levelmodel:has(input:checked), .setting-label:has(input:checked), .levelmodel-button.isActive {
	cursor: default;
	background: var(--accentContrast);
	color: var(--accent);
}
.levelmodel-input, .setting-label input {
	position: absolute;
	opacity: 0;
	width: 1px;
	height: 1px;
	pointer-events: none;
}

.levelmodel-button {
	width: 100%;
	justify-content: start;
}

.setting-options {
	width: 100%;
}
.setting-label {
	flex: 1;
	text-align: center;
	justify-content: center;
}
.setting {
	margin-top: .875rem;
}
.setting.divided {
	border-top: 1px solid var(--border);
	padding-top: 0.875rem;
}
.setting-title {
	margin-bottom: 0.25rem;
}
.setting-info p {
	margin-top: 0;
}
.setting-info {
	margin-top: 0.3125rem;
	line-height: 1.25;
	font-weight: 300;
}

.hotkey {
	display: flex;
	align-items: center;
	gap: .25rem;
}
.hotkey strong {
	text-transform: uppercase;
	display: flex;
	align-items: center;
	padding: 0 .25rem;
	border-radius: .25rem;
	color: color-mix(in srgb, var(--color) 75%, var(--card));
	background: var(--accentLight);
	font-size: .6875rem;
	height: 1.125rem;
	min-width: 1.125rem;
	justify-content: center;
	line-height: 0;
}
.hotkey .tabler-icon {
	font-size: .875rem;
	margin-inline: -.125rem;
}

/* buttons */
.buttons {
	justify-content: center;
	gap: 1rem;
}

button {
	padding: 0;
}

button, .button {
	margin: 0;
	background: transparent;
	cursor: pointer;
	border: none;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	vertical-align: top;
	font: inherit;
	font-weight: 600;
	line-height: 1;
	transition: background-color .1s, color .1s;
}

.button {
	gap: .25rem;
	border-radius: .75rem;
	height: 2.5rem;
	padding: 0 1.5rem;
	background: var(--accent);
	color: var(--accentContrast);
}
.button-light, .button-play {
	color: var(--accent);
	background: var(--accentLight);
}
.button-narrower, .levelmodel-toggle {
	padding-inline: 1rem;
}

.button-play, .button-x {
	border-radius: 2rem;
}
.button-play {
	width: 2rem;
	height: 2rem;
	font-size: 1.125rem;
	transition: background-color .1s, color .1s;
}
.button-play.control-play {
	width: 2.5rem;
	height: 2.5rem;
	font-size: 1.5rem;
	margin-block: -.25rem;
}

.control-button {
	font-size: 1.5rem;
	width: 2.375rem;
	height: 2rem;
}

.control-button:disabled, .button-play.control-play:disabled, .button:is(:disabled, .disabled) {
	cursor: not-allowed;
	opacity: 0.4;
}

.button-x {
	width: 1.5rem;
	height: 1.5rem;
	font-size: 1rem;
}
.button-x:hover {
	background-color: var(--c-red);
	color: #fff;
}

.button-grip {
	width: 100%;
	height: max(1.875rem, 100%);
	justify-content: center;
	cursor: move;
}

.modal-x {
	width: 1.5em;
	height: 1.5em;
	margin: -.125em -.125em -.125em auto;
	line-height: 1;
}
.modal-x .tabler-icon {
	font-size: 1.5rem;
}

.button:not(:disabled, .disabled):hover, .isCurrent .button-play, .button-play.control-play:not(:disabled):hover {
	background-color: var(--accentDark);
}
.button-light:not(:disabled):hover, .button-play:not(:disabled):hover, .isCurrent .button-play:not(:disabled):hover, .button-play.control-play {
	background-color: var(--accent);
}
.button:not(:disabled, .disabled):hover, .button-play:not(:disabled):hover, .isCurrent .button-play, .button-play.control-play {
	color: var(--accentContrast);
}
.control-button, .button-grip:hover, .modal-x:hover {
	color: var(--accent);
}
.control-button:not(:disabled):hover, .button-x, .button-grip, .modal-x {
	color: var(--accentDark);
}

.levelmodel-toggle {
	display: none;
}
.levelmodel-toggle-arrow {
	font-size: 1rem;
	margin-right: -.375rem;
}
.levelmodel-toggle span {
	width: 6ch;
	text-align: left;
}

/* tracks */
.tracks {
	flex-direction: column;
	gap: .25rem;
}
.track {
	padding: .25rem;
	min-height: 2.5625rem;
	border: 1px solid var(--border);
	border-radius: .75rem;
	background: color-mix(in srgb, var(--card), var(--accentContrast));
}
.track-headers, .track {
	gap: .25rem;
	display: grid;
	align-items: center;
	grid-template-columns: 1.75rem 2rem 9fr 8fr 24rem 1.5rem;
}
.track-headers {
	padding: 0 .25rem;
	margin: 0 1px;
	height: 1.5rem;
}
.track-data {
	align-self: stretch;
}
.track-level {
	flex: 1;
	place-content: center;
	border-radius: .4375rem;
	--hlActiveBg: light-dark(color-mix(in srgb, var(--bgHl, currentColor), var(--card) 94%), color-mix(in srgb, var(--bgHl, currentColor), var(--card) 80%));
}
.track-waveform {
	padding: 0 .125rem;
	margin: -.25rem 0;
}
.track-control {
	height: 2rem;
	place-content: center;
}
.track-message {
	height: 2.5rem;
	place-content: center;
	line-height: 1.25;
	margin: -.25rem 0;
}
.isCurrent {
	border-color: color-mix(in srgb, var(--border) 75%, var(--accent));
}
.track:hover {
	border-color: color-mix(in srgb, var(--border), var(--accent));
}
.isCurrent, .track:hover {
	color: var(--colorBright);
	background-color: var(--accentContrast);
}

.track-name {
	padding-left: 0.125rem;
}
.track-name-text {
	font-size: 0.8125rem;
	line-height: .9375rem;
	display: -webkit-box;
	-webkit-box-orient: vertical;
	overflow: hidden;
	line-clamp: 2;
	-webkit-line-clamp: 2;
}
.track-level.clickable:not(.colHl):hover {
	background-color: color-mix(in srgb, var(--hlActiveBg), transparent);
}
.colHl {
	background-color: var(--hlActiveBg);
}

.track-loader {
	font-size: 1.5rem;
	animation: spin 1s linear infinite;
	vertical-align: top;
}
@keyframes spin {
	from {transform: rotate(0deg);}
	to {transform: rotate(360deg);}
}

/* waveform */
.wf-outer {
	height: 2.5rem;
	width: var(--wfWidth, var(--w));
	display: flex;
	position: relative;
	--o: 0.2;
}
.wf {
	flex: 1;
	place-content: center;
	position: relative;
	padding: 2px 0;
}
.wf.played {
	--oAdd: 0.4;
	--wfBg: var(--accent);
}
.wf::before {
	content: '';
	display: block;
	background: var(--accent);
	height: var(--h);
	opacity: calc(var(--o) + var(--oAdd, 0));
}

.wf-outer:hover {
	--o: 0.4;
}
.wf-outer:hover .wf:hover ~ .wf {
	--o: 0.2;
}
.isPlaying .wf-outer .wf.played {
	--o: 0.5;
}
.isPlaying .wf-outer .wf:hover ~ .wf.played {
	--o: 0.3;
}

.wf-time {
	position: absolute;
	bottom: 100%;
	left: var(--offX);
	transform: translateX(calc(-50% + var(--cv)));
	font-size: 0.75rem;
	background: #000c;
	color: #fff;
	padding: .125rem .5rem;
	border-radius: .25rem;
	pointer-events: none;
	display: none;
}
.wf-outer:hover .wf-time {
	display: block;
}

/* popover */
.levelmodels-popover-cont {
	margin: .5rem 0 0;
	inset: unset;
	left: anchor(left);
	right: anchor(right);
 	top: anchor(bottom);
	background: var(--accentLight);
	border: none;
	padding: .25rem;
	border-radius: .75rem;
	width: auto;
}

/* dialog */
.dialog {
	padding: 1.5rem;
	background: var(--card);
	color: var(--color);
	border: none;
	border-radius: 1rem;
	box-shadow: 0 .5rem 1rem #0004;
	width: 20rem;
}
.dialog::backdrop {
	background: #0006;
}

.modal-title {
	font-size: 1.25rem;
	font-weight: 600;
	line-height: 1.25;
}

/* notes */
.app-note {
	border-radius: .75rem;
	border: 1px solid var(--c-blue);
	color: var(--colorBright);
	background: color-mix(in srgb, var(--c-blue) 25%, var(--accentContrast));
	padding: 1rem 1.25rem;
	width: fit-content;
	margin-inline: auto;
	line-height: 1.25;
}
.app-note-title {
	margin: 0;
}

/* drag & drop */
.track-grip {
	width: 100%;
	height: 100%;
	min-height: 1.875rem;
}
.rowDrop {
	box-shadow: 0 -2px 0 var(--accent);
}
.rowDragged ~ .rowDrop {
	box-shadow: 0 2px 0 var(--accent);
}

@media screen and (max-width: 1100px) {
	.xl-hide {
		display: none;
	}
	#app {
		max-width: 56rem;
	}
	.files-table .narrower {
		width: 9%;
	}

	.levelmodel-toggle {
		display: flex;
	}

	.track-headers {
		padding: 0 .375rem;
	}
	.track, .track-headers {
		grid-template-columns: 2.125rem 1fr 24rem 1.5rem;
	}
	.track-message {
		padding: 0 .25rem;
	}
	.track-control {
		grid-row: 2;
		grid-column: 1;
		padding-left: 2px;
	}
	.track-waveform, .track-message {
		margin: 0;
		grid-row: 2;
		grid-column: 2/-1;
	}

	.wf-outer, .track-message {
		height: 2.25rem;
	}
}
@media screen and (max-width: 700px) {
	body {
		padding: 1rem;
	}
	.files-table .narrower {
		width: 3.75rem;
	}
	.m-hide {
		display: none;
	}
	.files-label {
		margin: 0;
	}
	.track-headers {
		display: none;
	}
	.track {
		grid-template-columns: 2.125rem 1fr 1.5rem;
	}
	.track-data {
		grid-row: 3;
		grid-column: 1/-1;
	}
	.track-level {
		line-height: 1;
		padding: .25rem 0;
	}
	.track-level::before {
		content: attr(data-title);
		display: block;
		color: color-mix(in srgb, var(--color) 60%, var(--card)) ;
		font-size: 0.6875rem;
		margin-bottom: 0.125rem;
	}
	.logo-svg {
		margin: 0;
	}
	.logo-text {
		display: none;
	}
	.button-narrower {
		padding-inline: .75rem;
	}
}

@media screen and (max-width: 500px) {
	.control-buttons {
		order: 3;
		width: 100%;
		justify-content: center;
	}
}

@media (pointer: coarse) {
	.touch-hide {
		display: none;
	}
}

/* transitions */
.fade-enter-active,
.fade-leave-active {
	transition: opacity 0.15s ease;
}

.fade-enter-from,
.fade-leave-to {
	opacity: 0;
}